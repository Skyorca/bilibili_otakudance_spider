
第五节  第六节  http协议， chrome工具

HTTP协议：无连接，无状态
服务器不保存链路，也不保存链路状态。状态可以放在用户请求的cookie里。
所以可以通过爬虫欺骗服务器来建立多个链接，获取数据

http协议包含了{Headers, Body}两个部分，形式是纯文本。body就是HTML文本。header包含控制信息。一般Header通过复制得到。
Request-Header:
    Accept: 接收文件类型 text/plain/json/css/jpg...
    Accept-Charset: 字符集
    Accept-encoding: gzip/dlate  是否有压缩（通过urllib查看）
    content-type: Body的类型
    content-length:
    If-Modified-Since time 在某个时间点time之前服务器的数据变没变
        没变：返回状态Status304，这时GET就没有东西返回给你。
        变了：返回Status200
    User-Agent: 代理浏览器（写成浏览器的名字比较好，防止被认为是爬虫。而且根据电脑，平板，手机等适应页面）
    Cookie: 经常扔掉，防止自己的id被识别。登录时要用，等等。
Response-Header:(注意可变的部分)
    Location
    Status: 200表示当前网页有效，302表示当前页面只是强制性要求访问的一个先导网页，它有一个字段Location指明跳转地址
    （比如请求个人空间主页，实际上必须先进入登录页面（返回302），登录之后才能跳转到其他页面（返回200））。新版requests包不需要手工处理，直接帮你做完了。
    Set-Cookie:cookie和域名是绑定的


http协议方法： GET/POST，唯一的区别是GET只含有HEADERS部分，POST有HEADERS+BODY两部分。不论是只有HEADERS还是既有HEADERS还有BODY， 都是先
包成packet，通过socket发到互联网上。socket只需要了解domain（以及端口号）就行，url什么的都是隐藏的。
参数，我们可以在浏览器上的url直接看到，但是GET时它是作为HEADERS的一部分，POST时作为BODY的一部分被藏在packet里面的。
GET 只想获得参数。 POST 可以修改参数，把内容放在BODY里送出去。所以GET一般读数据，POST向服务器提交数据。
（这个参数是什么？可以是各种资源，可以是？）


Status Code:
300
    多个可用资源
301
302
    重定向，requests包帮忙二次发送请求解决问题
304
    If-Modified-Since 爬虫发request包时注意不要带上这个，否则服务器不返回东西给你
403/500/503
    基本代表爬虫被识别出来了，是个严重错误（解决：减少速度）
404
    解决：丢掉错误的URL


HTTPS:
是HTTP之上的协议，首先HEADER BODY被包装成packet，然后在socket发送端进行SSL加密，然后传输
HTTP->SSL->Socket

chrome工具：Inspect
在Elements里面定位：元素位置，可以copy过来，也可以定位元素的XPATH,复制，留着爬虫用
在Console试验代码，正确的拿过来做脚本用

异步请求：
一些数据在网页源代码里面不显示，请求页面时同时有数据请求向服务器端拿这些动态的数据填上
通过Inspect--Network--XHR看

对每个请求都有HEADERS Response preview等域可以查看。对于headers可能要从request/response两方面拼接出一个合适的爬虫头来，preview看源码和response看
服务器返回来什么。

工具json-view: 从response数据里找出json文件并将其request headers中的URL输入浏览器，解析成json格式直观效果

第九章 水木清华社区--实战爬虫

1. headers有if-modified-since这样的字段很可能返回304，拿掉
2. 按板块分类的网站首先讨论它的网站结构（或者sitemap分析）
